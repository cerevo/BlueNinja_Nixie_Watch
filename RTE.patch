Only in RTE/Device/TZ1001MBG: RTE_Device - ÉRÉsÅ[.h
diff -ur RTE.orig/Device/TZ1001MBG/RTE_Device.h RTE/Device/TZ1001MBG/RTE_Device.h
--- RTE.orig/Device/TZ1001MBG/RTE_Device.h	2015-07-08 09:35:15 +0900
+++ RTE/Device/TZ1001MBG/RTE_Device.h	2015-07-21 21:38:14 +0900
@@ -87,22 +87,22 @@
 #define RTE_GPIO_9_ID 1
 #define RTE_GPIO_10_ID 1
 #define RTE_GPIO_11_ID 1
-#define RTE_GPIO_12_ID 1
-#define RTE_GPIO_13_ID 1
-#define RTE_GPIO_14_ID 1
-#define RTE_GPIO_15_ID 1
-#define RTE_GPIO_16_ID 0
-#define RTE_GPIO_17_ID 0
-#define RTE_GPIO_18_ID 0
-#define RTE_GPIO_19_ID 0
-#define RTE_GPIO_20_ID 0
-#define RTE_GPIO_21_ID 0
-#define RTE_GPIO_22_ID 0
-#define RTE_GPIO_23_ID 0
-#define RTE_GPIO_24_ID 1
-#define RTE_GPIO_25_ID 1
-#define RTE_GPIO_26_ID 1
-#define RTE_GPIO_27_ID 1
+#define RTE_GPIO_12_ID 0
+#define RTE_GPIO_13_ID 0
+#define RTE_GPIO_14_ID 0
+#define RTE_GPIO_15_ID 0
+#define RTE_GPIO_16_ID 1
+#define RTE_GPIO_17_ID 1
+#define RTE_GPIO_18_ID 2
+#define RTE_GPIO_19_ID 2
+#define RTE_GPIO_20_ID 1
+#define RTE_GPIO_21_ID 1
+#define RTE_GPIO_22_ID 2
+#define RTE_GPIO_23_ID 2
+#define RTE_GPIO_24_ID 0
+#define RTE_GPIO_25_ID 0
+#define RTE_GPIO_26_ID 0
+#define RTE_GPIO_27_ID 0
 #define RTE_GPIO_28_ID 1
 #define RTE_GPIO_29_ID 1
 #define RTE_GPIO_30_ID 1
@@ -283,12 +283,12 @@
 //   <o8> DMA Channel <0-7>
 //   <o9> Handshake Channel <0-7>
 //  </e>
-#define RTE_SPI3 0
+#define RTE_SPI3 1
 #if RTE_SPI3
-#define RTE_SPIM3_CS_N_ID 1
-#define RTE_SPIM3_CLK_ID 1
-#define RTE_SPIM3_MOSI_ID 1
-#define RTE_SPIM3_MISO_ID 1
+#define RTE_SPIM3_CS_N_ID 2
+#define RTE_SPIM3_CLK_ID 2
+#define RTE_SPIM3_MOSI_ID 2
+#define RTE_SPIM3_MISO_ID 2
 #define RTE_SPIM3_DRIVE_CAPABILITY 0
 #define RTE_SPIM3_RESISTOR         0
 #define RTE_SPIM3_DMA_RX 0
@@ -347,7 +347,7 @@
 //   <o6> DMA Channel <0-7>
 //   <o7> Handshake Channel <0-7>
 //  </e>
-#define RTE_I2C1 0
+#define RTE_I2C1 1
 #if RTE_I2C1
 #define RTE_I2C1_DATA_ID 1
 #define RTE_I2C1_CLK_ID 1
@@ -377,10 +377,10 @@
 //   <o6> DMA Channel <0-7>
 //   <o7> Handshake Channel <0-7>
 //  </e>
-#define RTE_I2C2 0
+#define RTE_I2C2 1
 #if RTE_I2C2
-#define RTE_I2C2_DATA_ID 1
-#define RTE_I2C2_CLK_ID 1
+#define RTE_I2C2_DATA_ID 2
+#define RTE_I2C2_CLK_ID 2
 #define RTE_I2C2_DRIVE_CAPABILITY 0
 #define RTE_I2C2_RESISTOR 1
 #define RTE_I2C2_DMA_RX 0
@@ -437,7 +437,7 @@
 // <i> Configuration settings for Driver_UART1 in component ::Drivers:UART
 //  <o1> UA1_RXD pin <1=>MCU_UA1_RXD
 //  <o2> UA1_TXD pin <1=>MCU_UA1_TXD
-#define RTE_UART1 0
+#define RTE_UART1 1
 #if RTE_UART1
 #define RTE_UA1_RXD_ID 1
 #define RTE_UA1_TXD_ID 1
@@ -533,7 +533,7 @@
 // </e>
 
 // <e> TMR (Timer)
-#define RTE_TMR 0
+#define RTE_TMR 1
 // </e>
 
 // <e> ADVTMR (Advanced Timer)
diff -ur RTE.orig/Middleware/TZ1001MBG/tz1sm_config.h RTE/Middleware/TZ1001MBG/tz1sm_config.h
--- RTE.orig/Middleware/TZ1001MBG/tz1sm_config.h	2015-07-08 09:35:15 +0900
+++ RTE/Middleware/TZ1001MBG/tz1sm_config.h	2015-07-21 19:55:54 +0900
@@ -53,7 +53,7 @@
 #undef TZ1XXX_BOARD_DEVELOPER_A
 #undef TZ1XXX_BOARD_REFERENCE_A
 #undef TZ1XXX_BOARD_REFERENCE_B
-#undef TZ1XXX_BOARD_REFERENCE_X
+#define TZ1XXX_BOARD_REFERENCE_X
 #undef TZ1XXX_BOARD_EXTERIOR_A
 
 
@@ -61,7 +61,7 @@
  * NON-OS, RTOS
  *
  */
-#undef TWIC_RTOS__NONOS
+#define TWIC_RTOS__NONOS
 #undef TWIC_RTOS__CMSIS_RTOS
 #undef TWIC_RTOS__FREERTOS
 #undef TWIC_RTOS__FREERTOS_TICKLESS
@@ -72,7 +72,7 @@
  * disable it for saving memory (-2.5kB).
  *
  */
-#undef TWIC_CONFIG_ENABLE_SCAN
+#define TWIC_CONFIG_ENABLE_SCAN
 
 /*
  * TWIC_CONFIG_RX_BUFFER_SIZE
@@ -89,8 +89,8 @@
  * disable it for saving memory.
  *
  */
-#undef TWIC_CONFIG_SM_INITIATOR
-#undef TWIC_CONFIG_SM_RESPONDER
+#define TWIC_CONFIG_SM_INITIATOR
+#define TWIC_CONFIG_SM_RESPONDER
 
 
 /*
@@ -98,17 +98,17 @@
  * for saving memory.
  *
  */
-#undef TWIC_API_LELMRESOLVEBDADDR
-#undef TWIC_API_LEDELWHITELIST
-#undef TWIC_API_LEADDWHITELIST
-#undef TWIC_API_LEREADWHITELISTSIZE
-#undef TWIC_API_LEREADLOCALSUPPORTEDFEATURES
-#undef TWIC_API_LESETHOSTCHANNELCLASSIFICATION
-#undef TWIC_API_LEREADCHANNELMAP
-#undef TWIC_API_LEREADSUPPORTEDSTATES
-#undef TWIC_API_LELMGENRESOLVABLEBDADDR
-#undef TWIC_API_LESETRANDOMADDRESS
-#undef TWIC_API_LESMSETIRVALUE
+#define TWIC_API_LELMRESOLVEBDADDR
+#define TWIC_API_LEDELWHITELIST
+#define TWIC_API_LEADDWHITELIST
+#define TWIC_API_LEREADWHITELISTSIZE
+#define TWIC_API_LEREADLOCALSUPPORTEDFEATURES
+#define TWIC_API_LESETHOSTCHANNELCLASSIFICATION
+#define TWIC_API_LEREADCHANNELMAP
+#define TWIC_API_LEREADSUPPORTEDSTATES
+#define TWIC_API_LELMGENRESOLVABLEBDADDR
+#define TWIC_API_LESETRANDOMADDRESS
+#define TWIC_API_LESMSETIRVALUE
 
 
 /*
@@ -116,12 +116,12 @@
  * for saving memory.
  *
  */
-#undef TWIC_API_GATTSERVERLONGCHARVALREADOUTRESPONSE
-#undef TWIC_API_GATTSERVERLONGCHARDESPREADOUTRESPONSE
-#undef TWIC_API_GATTSERVERLONGCHARVALPREPAREWRITEINRESPONSE
-#undef TWIC_API_GATTSERVERLONGCHARDESPPREPAREWRITEINRESPONSE
-#undef TWIC_API_GATTSERVEREXECCHARVALWRITEINRESPONSE
-#undef TWIC_API_GATTSERVEREXECCHARDESPWRITEINRESPONSE
+#define TWIC_API_GATTSERVERLONGCHARVALREADOUTRESPONSE
+#define TWIC_API_GATTSERVERLONGCHARDESPREADOUTRESPONSE
+#define TWIC_API_GATTSERVERLONGCHARVALPREPAREWRITEINRESPONSE
+#define TWIC_API_GATTSERVERLONGCHARDESPPREPAREWRITEINRESPONSE
+#define TWIC_API_GATTSERVEREXECCHARVALWRITEINRESPONSE
+#define TWIC_API_GATTSERVEREXECCHARDESPWRITEINRESPONSE
 
 
 /*
@@ -129,27 +129,27 @@
  * for saving memory.
  *
  */
-#undef TWIC_API_GATTCLIENTEXGMTU
-#undef TWIC_API_GATTCLIENTDISCOVERPRIMARYSERVICE
-#undef TWIC_API_GATTCLIENTDISCOVERPRIMARYSERVICEBYSERVICEUUID
-#undef TWIC_API_GATTCLIENTFINDINCLUDEDSERVICE
-#undef TWIC_API_GATTCLIENTDISCOVERALLCHARACTERISTICS
-#undef TWIC_API_GATTCLIENTDISCOVERCHARACTERISTICSBYUUID
-#undef TWIC_API_GATTCLIENTDISCOVERALLDESCRIPTORS
-#undef TWIC_API_GATTCLIENTREADCHARACTERISTICVALUE
-#undef TWIC_API_GATTCLIENTREADUSINGCHARACTERISTICUUID
-#undef TWIC_API_GATTCLIENTWRITECHARACTERISTICVALUE
-#undef TWIC_API_GATTCLIENTRELIABLEWRITE
-#undef TWIC_API_GATTCLIENTWRITEWITHOUTRESPONSE
-#undef TWIC_API_GATTCLIENTSIGNEDWRITEWITHOUTRESPONSE
-#undef TWIC_API_GATTCLIENTINDICATIONCONFIRMATIONRESPONSE
-#undef TWIC_API_GATTCLIENTREADCHARACTERISTICDESCRIPTOR
-#undef TWIC_API_GATTCLIENTREADMULTIPLECHARVALUES
-#undef TWIC_API_GATTCLIENTWRITECHARACTERISTICDESCRIPTOR
-#undef TWIC_API_GATTCLIENTREADLONGCHARACTERISTICVALUE
-#undef TWIC_API_GATTCLIENTREADLONGCHARACTERISTICDESCRIPTOR
-#undef TWIC_API_GATTCLIENTWRITELONGCHARACTERISTICVALUE
-#undef TWIC_API_GATTCLIENTWRITELONGCHARACTERISTICDESCRIPTOR
+#define TWIC_API_GATTCLIENTEXGMTU
+#define TWIC_API_GATTCLIENTDISCOVERPRIMARYSERVICE
+#define TWIC_API_GATTCLIENTDISCOVERPRIMARYSERVICEBYSERVICEUUID
+#define TWIC_API_GATTCLIENTFINDINCLUDEDSERVICE
+#define TWIC_API_GATTCLIENTDISCOVERALLCHARACTERISTICS
+#define TWIC_API_GATTCLIENTDISCOVERCHARACTERISTICSBYUUID
+#define TWIC_API_GATTCLIENTDISCOVERALLDESCRIPTORS
+#define TWIC_API_GATTCLIENTREADCHARACTERISTICVALUE
+#define TWIC_API_GATTCLIENTREADUSINGCHARACTERISTICUUID
+#define TWIC_API_GATTCLIENTWRITECHARACTERISTICVALUE
+#define TWIC_API_GATTCLIENTRELIABLEWRITE
+#define TWIC_API_GATTCLIENTWRITEWITHOUTRESPONSE
+#define TWIC_API_GATTCLIENTSIGNEDWRITEWITHOUTRESPONSE
+#define TWIC_API_GATTCLIENTINDICATIONCONFIRMATIONRESPONSE
+#define TWIC_API_GATTCLIENTREADCHARACTERISTICDESCRIPTOR
+#define TWIC_API_GATTCLIENTREADMULTIPLECHARVALUES
+#define TWIC_API_GATTCLIENTWRITECHARACTERISTICDESCRIPTOR
+#define TWIC_API_GATTCLIENTREADLONGCHARACTERISTICVALUE
+#define TWIC_API_GATTCLIENTREADLONGCHARACTERISTICDESCRIPTOR
+#define TWIC_API_GATTCLIENTWRITELONGCHARACTERISTICVALUE
+#define TWIC_API_GATTCLIENTWRITELONGCHARACTERISTICDESCRIPTOR
 
 
 /*
@@ -157,10 +157,10 @@
  * saving memory.
  *
  */
-#undef TWIC_API_LECEDBUSWRITE
-#undef TWIC_API_LECEDBUSREAD
-#undef TWIC_API_LECEMEMORYWRITE
-#undef TWIC_API_LECEMEMORYREAD
+#define TWIC_API_LECEDBUSWRITE
+#define TWIC_API_LECEDBUSREAD
+#define TWIC_API_LECEMEMORYWRITE
+#define TWIC_API_LECEMEMORYREAD
 
 
 /*
@@ -168,9 +168,9 @@
  * Enable each Service if the Service Generator is used.
  */
 /* GA Service Descripter and Characteristic attribute data. */
-#undef TWIC_UTIL_GA_SERVICE
+#define TWIC_UTIL_GA_SERVICE
 /* DI Service Descripter and Characteristic attribute data. */
-#undef TWIC_UTIL_DI_SERVICE
+#define TWIC_UTIL_DI_SERVICE
 /* HR Service Descripter and Characteristic attribute data. */
 #undef TWIC_UTIL_HR_SERVICE
 /* Blood Pressure Service Descripter and Characteristic attribute data. */
@@ -188,10 +188,10 @@
 /* Health Thermometer Service */
 #undef TWIC_UTIL_HT_SERVICE
 /* User defined Service 128bit UUID (Experimental Temporary 128bit Service) */
-#undef TWIC_UTIL_UU_SERVICE
-#undef TWIC_UTIL_UU_CHARACTERISTICS
+#define TWIC_UTIL_UU_SERVICE
+#define TWIC_UTIL_UU_CHARACTERISTICS
 /* ANCS */
-#undef TWIC_UTIL_ANCS
+#define TWIC_UTIL_ANCS
 
 
 /*
@@ -252,6 +252,7 @@
 #elif defined(TZ1XXX_BOARD_REFERENCE_X) || defined(TZ1XXX_BOARD_EXTERIOR_A)
 
 #define TWIC_BUTTON_GPIO_NO (2)
+#define TWIC_BUTTON_GPIO_NO_BB (6)
 
 #endif
 
@@ -324,7 +325,7 @@
 #define TWIC_DEBUG_UART_CH_1   (1)
 
 /* TWIC_DEBUG_LOG_TRACE must be defined when DEBUG UART is used. */
-#define TWIC_DEBUG_LOG_TRACE /* enable trace log */
+#undef TWIC_DEBUG_LOG_TRACE /* enable trace log */
 
 /* TWIC_DEBUG_LOG_TRACE must be defined when TWIC_DEBUG_LOG_UART is used. */
 #undef TWIC_DEBUG_LOG_UART /* enable controller communication log */
diff -ur RTE.orig/Middleware/TZ1001MBG/tz1sm_hal.c RTE/Middleware/TZ1001MBG/tz1sm_hal.c
--- RTE.orig/Middleware/TZ1001MBG/tz1sm_hal.c	2015-07-08 09:35:15 +0900
+++ RTE/Middleware/TZ1001MBG/tz1sm_hal.c	2015-07-21 20:01:54 +0900
@@ -966,6 +966,15 @@
     if (pmu_status != PMU_OK)
       return 1;
   }
+  #if defined(TWIC_BUTTON_GPIO_NO_BB)
+  if ((TWIC_BUTTON_GPIO_NO_BB > 0  && TWIC_BUTTON_GPIO_NO_BB < 16) ||
+      (TWIC_BUTTON_GPIO_NO_BB > 23 && TWIC_BUTTON_GPIO_NO_BB < 32)) {
+    pmu_status = Driver_PMU.StandbyInputBuffer((PMU_IO_FUNC)TWIC_BUTTON_GPIO_NO_BB, 0);
+    if (pmu_status != PMU_OK) {
+      return 1;
+    }        
+  }
+  #endif
 #endif
 
   return 0;
@@ -983,8 +992,16 @@
     if (pmu_status != PMU_OK)
       return 1;
   }
+  #if defined(TWIC_BUTTON_GPIO_NO_BB)
+  if ((TWIC_BUTTON_GPIO_NO_BB > 0  && TWIC_BUTTON_GPIO_NO_BB < 16) ||
+      (TWIC_BUTTON_GPIO_NO_BB > 23 && TWIC_BUTTON_GPIO_NO_BB < 32)) {
+    pmu_status = Driver_PMU.StandbyInputBuffer((PMU_IO_FUNC)TWIC_BUTTON_GPIO_NO_BB, 1);
+    if (pmu_status != PMU_OK) {
+      return 1;
+    }        
+  }
+  #endif
 #endif
-
   return 0;  
 }
 
@@ -2022,6 +2039,11 @@
   if (ret != GPIO_OK)
     return 1;
 
+  #if defined(TWIC_BUTTON_GPIO_NO_BB)
+  ret = Driver_GPIO.Configure(TWIC_BUTTON_GPIO_NO_BB, GPIO_DIRECTION_INPUT_HI_Z, GPIO_EVENT_EDGE_NEG, handler);
+  if (ret != GPIO_OK) return 1;
+  #endif
+
   return 0;
 }
 
diff -ur RTE.orig/Middleware/TZ1001MBG/tz1sm_hal.h RTE/Middleware/TZ1001MBG/tz1sm_hal.h
--- RTE.orig/Middleware/TZ1001MBG/tz1sm_hal.h	2015-07-08 09:35:15 +0900
+++ RTE/Middleware/TZ1001MBG/tz1sm_hal.h	2015-07-21 20:02:54 +0900
@@ -89,7 +89,6 @@
 #define TWIC_TYPES__TYPES
 #undef  TWIC_STDIO__STDIO
 #define TWIC_POSIX__POSIX
-#define TWIC_RTOS__CMSIS_RTOS
 #define TWIC_PMU__CMSIS_PMU
 #define TWIC_PMU__CMSIS_RTC
 #define TWIC_PMU__CMSIS_MISC
